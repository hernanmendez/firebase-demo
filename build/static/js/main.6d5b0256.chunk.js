(this.webpackJsonpdocs=this.webpackJsonpdocs||[]).push([[0],{16:function(e,t,a){e.exports=a(27)},21:function(e,t,a){},22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(10),r=a.n(i),o=(a(21),a(2)),c=a(11),u=a(12),l=a(1),h=a(15),p=a(14),d=a(13),f=(a(22),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={paragraphs:[""],inUseByOthers:[],active:null},n.database=n.props.firebase.database(),n.interval=null,n.timeout=null,n.update=n.update.bind(Object(l.a)(n)),n.onChange=n.onChange.bind(Object(l.a)(n)),n.tellActive=n.tellActive.bind(Object(l.a)(n)),n.resetTimeout=n.resetTimeout.bind(Object(l.a)(n)),n.changeLineCount=n.changeLineCount.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];this.database.ref().child("Projects").on("value",(function(a){t=[],a.forEach((function(a){console.log(a.val()),t.push(a.val()),t[e.state.active]===e.state.paragraphs[e.state.active]&&e.setState({paragraphs:t})}))})),this.database.ref("used").on("value",(function(t){e.setState({inUseByOthers:JSON.parse(t.val())})}))}},{key:"update",value:function(e){null!==this.state.paragraphs[e]&&this.database.ref("Projects/"+e).set(this.state.paragraphs[e])}},{key:"changeLineCount",value:function(e,t){var a=this;t?this.database.ref("Projects/"+e).set(this.state.paragraphs[e]):(this.database.ref("Projects/"+e).remove(),setTimeout((function(){return a.database.ref("Projects/"+e).remove()}),300))}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.update(e.state.active),clearInterval(e.interval),e.tellActive(!1,e.state.active)}),15e3)}},{key:"tellActive",value:function(e,t){var a=this;if(e)this.interval=setInterval((function(){a.update(t)}),1e3),this.resetTimeout(),t<this.state.paragraphs.length&&this.database.ref("used").set(JSON.stringify([].concat(Object(o.a)(this.state.inUseByOthers),[t])));else{this.update(t),clearInterval(this.interval),clearTimeout(this.timeout);var n=Object(o.a)(this.state.inUseByOthers);n.splice(n.indexOf(t),1),this.database.ref("used").set(JSON.stringify(n))}}},{key:"onChange",value:function(e,t){e.preventDefault();var a={paragraphs:Object(o.a)(this.state.paragraphs)};e.target.value.indexOf("\n")>-1?(a.paragraphs.splice(t+1,0,""),this.tellActive(!1,t),this.setState(a,(function(){return document.getElementById(t+1).focus()}))):(a.paragraphs[t]=e.target.value,this.setState(a),this.resetTimeout())}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},this.state.paragraphs.map((function(t,a){return s.a.createElement(d.a,{disabled:e.state.inUseByOthers.indexOf(a)>-1&&e.state.active!==a,key:"text".concat(a),id:a,onChange:function(t){return e.onChange(t,a)},onKeyDown:function(t){if("Backspace"===t.key&&""===t.target.value){t.preventDefault();var n={paragraphs:Object(o.a)(e.state.paragraphs)};n.paragraphs.splice(a,1),e.changeLineCount(a,!1),e.tellActive(!1,a),e.setState(n,(function(){-1===e.state.inUseByOthers.indexOf(a-1)&&document.getElementById(a-1).focus()}))}},onFocus:function(t){e.setState({active:a}),e.tellActive(!0,a)},onBlur:function(t){e.setState({active:null}),e.tellActive(!1,a)},value:t})})),s.a.createElement("button",{onClick:function(){return e.setState({paragraphs:[].concat(Object(o.a)(e.state.paragraphs),[""])},(function(){return document.getElementById(e.state.paragraphs.length-1).focus()}))}},"Add Line"),s.a.createElement("button",{onClick:function(){e.database.ref("used").set("[]")}},"Click to make every line available"))}}]),a}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=a(5),b=a.n(v);a(24);b.a.initializeApp({apiKey:"AIzaSyA870ofDqsTXsAhXWifngor4qPQdKfAxss",authDomain:"bad-docs.firebaseapp.com",databaseURL:"https://bad-docs.firebaseio.com",projectId:"bad-docs",storageBucket:"bad-docs.appspot.com",messagingSenderId:"1079006258139",appId:"1:1079006258139:web:b731dccaab13e38eab3dfe",measurementId:"G-99VLZBK3JZ"}),r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(f,{firebase:b.a})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.6d5b0256.chunk.js.map